<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Entre Mundos ‚Äî Dia 1</title>

  <style>
    :root{
      --bg:#0b2238; --card:#112c4a; --card-edge:#1a3a5a;
      --text:#e8f0fb; --muted:#a9bed9; --accent:#ffd85b;
      --btn:#214f85; --btn-soft:#173a63; --btn-text:#fff;
      --radius:20px; --shadow:0 10px 24px rgba(0,0,0,.35);
    }
    html,body{
      margin:0;
      background:radial-gradient(1200px 600px at 50% -100px,#173455 0%,#0b2238 60%,#07192b 100%);
      color:var(--text);
      font-family:-apple-system,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      line-height:1.5;
    }
    .wrap{max-width:860px;margin:24px auto;padding:0 16px}
    header{display:flex;gap:12px;align-items:center;margin:8px 0 14px}
    .dot{width:26px;height:26px;border-radius:8px;background:radial-gradient(circle at 30% 30%, #3ea7ff, #0e4379 60%, #0a2a4a);box-shadow:inset 0 0 0 2px rgba(255,255,255,.08)}
    h1{margin:0 0 10px}
    nav{display:flex;gap:14px;flex-wrap:wrap;margin:0 0 14px}
    .chip{padding:10px 16px;border-radius:16px;background:rgba(255,255,255,.06);
      color:var(--muted);border:1px solid rgba(255,255,255,.07);cursor:pointer}
    .chip.active{background:rgba(255,255,255,.12);color:#fff}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid var(--card-edge);border-radius:var(--radius);
      box-shadow:var(--shadow);padding:18px;margin:16px 0;
    }
    .card h2{margin:0 0 10px;font-size:18px;color:var(--muted);font-weight:600}
    .highlight{color:var(--accent);font-weight:700}
    #oracleMsg{font-size:22px;margin:12px 0 16px}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    button{appearance:none;border:0;border-radius:14px;padding:12px 18px;
      background:var(--btn);color:var(--btn-text);font-weight:700;cursor:pointer}
    button.secondary{background:var(--btn-soft)}
    .note{color:var(--muted);font-size:14px;margin-top:8px}
    .muted-link{color:var(--muted);text-decoration:underline;cursor:pointer}
    footer{color:var(--muted);text-align:center;margin:22px 0}
  </style>

  <!-- L√≥gica do Or√°culo (mant√©m o teu ficheiro) -->
  <script src="oraculo.js?v=9" defer></script>
</head>
<body>
<div class="wrap">
  <header>
    <div class="dot"></div>
    <h1>Entre Mundos ‚Äî Dia 1</h1>
  </header>

  <nav>
    <div class="chip" data-tab="tabMensagem">Mensagem</div>
    <div class="chip" data-tab="tabRespiracao">Respira√ß√£o</div>
    <div class="chip" data-tab="tabFrase">Frase</div>
    <div class="chip" data-tab="tabSilencio">Sil√™ncio</div>
    <div class="chip" data-tab="tabFavoritos">Favoritos</div>
  </nav>

  <!-- Mensagem -->
  <section class="card" id="tabMensagem">
    <h2>Mensagem de hoje ‚Äî <span class="highlight">Reconex√£o</span></h2>
    <p>
      Respira e lembra-te: <strong>tu √©s a casa antes do mundo.</strong>
      O teu valor n√£o depende da produtividade; a tua verdade n√£o precisa gritar.
      A cor azul √© o teu porto ‚Äî volta a ela quando o ru√≠do te cansar.
    </p>
  </section>

  <!-- Respira√ß√£o -->
  <section class="card" id="tabRespiracao" style="display:none">
    <h2>Exerc√≠cio de Respira√ß√£o</h2>
    <p>Inspira 4, segura 4, expira 6. Repete 5 vezes.</p>
  </section>

  <!-- Frase -->
  <section class="card" id="tabFrase" style="display:none">
    <h2>Frase Inspiradora</h2>
    <p>‚ÄúMesmo no escuro, a tua luz interior sabe o caminho.‚Äù</p>
  </section>

  <!-- Sil√™ncio -->
  <section class="card" id="tabSilencio" style="display:none">
    <h2>Pr√°tica de Sil√™ncio</h2>
    <p>Fecha os olhos, escuta a respira√ß√£o e deixa o mundo desaparecer por 1 minuto.</p>
  </section>

  <!-- Or√°culo ‚Äî vis√≠vel s√≥ em Respira√ß√£o e Frase -->
  <section class="card" id="cardOraculo">
    <h2>Or√°culo ‚Äî Entre Mundos</h2>
    <div id="oracleMsg" aria-live="polite">Toca em <em>‚ÄúNova mensagem‚Äù</em> para receber a tua mensagem.</div>
    <div class="row">
      <button id="btnNova">Nova mensagem</button>
      <button id="btnCopiar" class="secondary">Copiar</button>
      <button id="btnWhats"  class="secondary">Partilhar no WhatsApp</button>
      <button id="btnFav" title="Guardar esta frase nos favoritos">‚≠ê Guardar</button>
    </div>
    <p class="note">As frases surgem de forma aleat√≥ria e sem n√∫meros.</p>
  </section>

  <!-- Favoritos -->
  <section class="card" id="tabFavoritos" style="display:none">
    <h2>Favoritos</h2>
    <div id="favList"></div>
    <p class="note"><a id="btnClearAll" class="muted-link" href="javascript:void(0)">Limpar todos</a></p>
  </section>

  <footer>Entre Mundos ‚Äî feito com verdade üíô</footer>
</div>

<script>
  // Abas onde o Or√°culo N√ÉO aparece
  const HIDE_ORACULO_IN = new Set(['tabMensagem','tabSilencio','tabFavoritos']);
  const ORACULO_ID = 'cardOraculo';

  // Alternar abas
  document.querySelectorAll('.chip[data-tab]').forEach(chip => {
    chip.addEventListener('click', () => {
      // esconder todas
      document.querySelectorAll('section.card').forEach(sec => sec.style.display = 'none');

      // mostrar a sec√ß√£o pedida
      const tabId = chip.dataset.tab;
      const target = document.getElementById(tabId);
      if (target) target.style.display = 'block';

      // mostrar/esconder Or√°culo conforme a aba
      const oraculo = document.getElementById(ORACULO_ID);
      if (oraculo) {
        oraculo.style.display = HIDE_ORACULO_IN.has(tabId) ? 'none' : 'block';
      }

      // estado visual dos chips
      document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
      chip.classList.add('active');
    });
  });

  // Estado inicial: Mensagem (sem Or√°culo)
  (function initTabs(){
    const defaultTab = 'tabMensagem';
    const first = document.querySelector(`.chip[data-tab="${defaultTab}"]`)
               || document.querySelector('.chip[data-tab]');
    if (first) first.click();
  })();

  /* ===== Favoritos (localStorage) ‚Äî simples ===== */
  const LS_KEY = 'entreMundos.favs.v1';
  const elText = document.getElementById('oracleMsg');
  const favList = document.getElementById('favList');

  function getFavs(){ try{ return JSON.parse(localStorage.getItem(LS_KEY)||'[]'); }catch{ return []; } }
  function setFavs(a){ localStorage.setItem(LS_KEY, JSON.stringify(a.slice(0,1000))); }
  function renderFavs(){
    if(!favList) return;
    const favs = getFavs();
    favList.innerHTML = favs.length
      ? favs.map(t=>`<div style="display:flex;justify-content:space-between;gap:12px;padding:10px 0;border-bottom:1px solid rgba(255,255,255,.08)">
          <div style="flex:1">${escapeHtml(t)}</div>
          <button class="secondary" data-rm="${encodeURIComponent(t)}">Remover</button>
        </div>`).join('')
      : `<p style="color:var(--muted);font-style:italic">Ainda n√£o tens favoritos. Guarda frases com o bot√£o ‚≠ê no Or√°culo.</p>`;
    favList.querySelectorAll('button[data-rm]').forEach(b=>{
      b.addEventListener('click',()=>{
        const t = decodeURIComponent(b.dataset.rm);
        setFavs(getFavs().filter(x=>x!==t));
        renderFavs();
      });
    });
  }
  function escapeHtml(s){return s.replace(/[&<>"]/g,m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[m]));}
  function updateFavBtn(){
    const btnFav = document.getElementById('btnFav'); if(!btnFav) return;
    const t=(elText?.textContent||'').trim();
    if(!t){ btnFav.disabled=true; btnFav.textContent='‚≠ê Guardar'; return; }
    btnFav.disabled=false;
    btnFav.textContent = getFavs().includes(t) ? '‚òÖ Guardado' : '‚≠ê Guardar';
  }
  document.getElementById('btnFav')?.addEventListener('click',()=>{
    const t=(elText?.textContent||'').trim(); if(!t) return;
    const favs = getFavs(); if(!favs.includes(t)) favs.unshift(t);
    setFavs(favs); renderFavs(); updateFavBtn();
  });
  document.getElementById('btnClearAll')?.addEventListener('click',()=>{
    if(confirm('Limpar todos os favoritos?')){ setFavs([]); renderFavs(); updateFavBtn(); }
  });
  renderFavs();
  updateFavBtn();
</script>
</body>
</html>
