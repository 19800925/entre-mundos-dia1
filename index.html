<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Entre Mundos — Dia 1</title>
<style>
  body { font-family: Arial, sans-serif; background: #0b1c3f; color: white; margin: 0; padding: 0; }
  .panel { padding: 20px; max-width: 600px; margin: auto; }
  .card { background: rgba(255,255,255,0.05); border-radius: 12px; padding: 20px; text-align: center; }
  .muted { color: #ccc; font-size: 14px; }
  .cta { background: #1e4db7; border: none; padding: 10px 20px; color: white; border-radius: 8px; cursor: pointer; margin: 5px; }
  .accent { color: #ffd700; font-weight: bold; }
  .chip { padding:8px 12px; border-radius:999px; border:1px solid #2b4b82; background:#142c54; color:white; font-weight:600; cursor:pointer; }
  .chip.active { outline:2px solid #ffd700; }
  .row { display: flex; justify-content: center; align-items: center; flex-wrap: wrap; }
  input { padding: 5px; border-radius: 6px; border: none; text-align: center; }
</style>
</head>
<body>
<section id="silencio" class="panel">
  <div class="card center">
    <div class="muted">Momento de silêncio</div>
    <p>Escolhe a duração e toca em <b>Iniciar</b>.</p>
    <div class="row" style="margin-bottom:8px; gap:8px; flex-wrap:wrap">
      <button class="chip dur-btn" data-mins="1">1 min</button>
      <button class="chip dur-btn" data-mins="2">2 min</button>
      <button class="chip dur-btn" data-mins="3">3 min</button>
      <button class="chip dur-btn" data-mins="5">5 min</button>
      <label style="margin-left:8px">
        <span class="small muted">ou</span>
        <input id="minutes" type="number" min="1" max="30" value="1" style="width:80px">
      </label>
    </div>
    <div class="row" style="margin-bottom:8px">
      <button class="cta" id="start-timer">Iniciar</button>
      <button class="cta" id="stop-timer">Parar</button>
    </div>
    <div id="timer" class="accent" style="font-size:28px">01:00</div>
  </div>
</section>
<script>
let tInt=null,left=60; const timerEl=document.getElementById('timer');
const minutesInput=document.getElementById('minutes');
const durBtns=[...document.querySelectorAll('.dur-btn')];

function fmt(s){ const m=Math.floor(s/60),r=s%60; return String(m).padStart(2,'0')+':'+String(r).padStart(2,'0'); }
function setActive(mins){
  durBtns.forEach(b=>b.classList.toggle('active', Number(b.dataset.mins)===mins));
  minutesInput.value = String(mins);
  localStorage.setItem('entre-mundos-dia1-silencio-mins', String(mins));
}
durBtns.forEach(b=>b.onclick=()=> setActive(Number(b.dataset.mins)));

function tick(){ left--; if(left<=0){ clearInterval(tInt); tInt=null; left=0; } timerEl.textContent = fmt(left); }
document.getElementById('start-timer').onclick=()=>{
  const mins = Math.max(1, Math.min(30, parseInt(minutesInput.value||'1',10)));
  left = mins*60; timerEl.textContent = fmt(left);
  clearInterval(tInt); tInt = setInterval(tick,1000);
  setActive(mins);
};
document.getElementById('stop-timer').onclick=()=>{ clearInterval(tInt); tInt=null; };

const savedMins = parseInt(localStorage.getItem('entre-mundos-dia1-silencio-mins')||'1',10);
setActive(savedMins);
timerEl.textContent = fmt(savedMins*60);
</script>
</body>
</html>
